% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/weights.R
\name{sp_weights}
\alias{sp_weights}
\title{Create spatial weights from an sf object}
\usage{
sp_weights(
  data,
  type = c("queen", "rook", "knn", "distance"),
  k = NULL,
  d = NULL,
  ...
)
}
\arguments{
\item{data}{An sf object with polygon or point geometries.}

\item{type}{Type of weights. One of:
\itemize{
\item "queen" (default): Polygons sharing any boundary point are neighbors
\item "rook": Polygons sharing an edge are neighbors
\item "knn": K-nearest neighbors based on centroid distance
\item "distance": All units within a distance threshold are neighbors
}}

\item{k}{Number of nearest neighbors. Required when \code{type = "knn"}.}

\item{d}{Distance threshold. Required when \code{type = "distance"}. Units match
the CRS of the data (e.g., meters for projected CRS).}

\item{...}{Additional arguments passed to spdep functions.}
}
\value{
A neighbors list object (class "nb") compatible with spdep.
}
\description{
Constructs spatial weights (neighborhood structure) from sf geometries.
Wraps spdep functions with a convenient interface.
}
\details{
\strong{Choosing a weight type:}
\itemize{
\item Use \strong{queen/rook} for polygon data where physical adjacency matters
\item Use \strong{knn} when you need guaranteed connectivity (no isolates) or for point data
\item Use \strong{distance} for point data or when interaction depends on proximity
}

\strong{KNN weights} always produce a connected graph (if k >= 1), making them
useful for datasets with islands or disconnected polygons.
}
\examples{
\dontrun{
library(sf)
nc <- st_read(system.file("shape/nc.shp", package = "sf"))

# Queen contiguity (default)
w_queen <- sp_weights(nc, type = "queen")

# K-nearest neighbors (guarantees connectivity)
w_knn <- sp_weights(nc, type = "knn", k = 6)

# Distance-based (e.g., 50km for projected data)
nc_proj <- st_transform(nc, 32119)  # NC State Plane
w_dist <- sp_weights(nc_proj, type = "distance", d = 50000)
}

}
