% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/locate_p_dispersion.R
\name{p_dispersion}
\alias{p_dispersion}
\title{P-Dispersion Problem}
\usage{
p_dispersion(
  facilities,
  n_facilities,
  cost_matrix = NULL,
  distance_metric = "euclidean",
  verbose = FALSE
)
}
\arguments{
\item{facilities}{An sf object representing candidate facility locations.
Note: This problem does not use demand points.}

\item{n_facilities}{Integer. Number of facilities to locate (p).}

\item{cost_matrix}{Optional. Pre-computed inter-facility distance matrix.}

\item{distance_metric}{Distance metric: "euclidean" (default) or "manhattan".}

\item{verbose}{Logical. Print solver progress.}
}
\value{
An sf object (the facilities input) with a \code{.selected} column.
Metadata includes \code{min_distance} (the objective value).
}
\description{
Solves the P-Dispersion problem: maximize the minimum distance between
any two selected facilities. This "maximin" objective ensures facilities
are spread out as much as possible.
}
\details{
The p-dispersion problem selects p facilities from a set of candidates such
that the minimum pairwise distance between any two selected facilities is
maximized. Unlike p-median or p-center, this problem does not consider
demand points---it focuses solely on spreading facilities apart.

The mixed integer programming formulation uses a Big-M approach:
\deqn{\max D}
Subject to:
\deqn{\sum_j y_j = p}
\deqn{D \leq d_{ij} + M(2 - y_i - y_j) \quad \forall i < j}
\deqn{y_j \in \{0,1\}, \quad D \geq 0}

Where D is the minimum separation distance to maximize, \eqn{d_{ij}} is the
distance between facilities i and j, \eqn{y_j = 1} if facility j is selected,
and M is a large constant. When both facilities i and j are selected
(\eqn{y_i = y_j = 1}), the constraint reduces to \eqn{D \leq d_{ij}},
ensuring D is at most the distance between any pair of selected facilities.
}
\section{Use Cases}{

P-dispersion is appropriate when facilities should be spread apart:
\itemize{
\item \strong{Obnoxious facilities}: Hazardous waste sites, prisons, or other
undesirable facilities that should be separated from each other
\item \strong{Franchise territories}: Retail locations where stores should not
cannibalize each other's market
\item \strong{Redundant systems}: Backup servers or emergency caches that should
be geographically distributed for resilience
\item \strong{Monitoring networks}: Air quality sensors or seismic monitors that
should cover distinct areas without overlap
\item \strong{Spatial sampling}: Selecting representative sample locations that
are well-distributed across a study area
}
}

\examples{
\dontrun{
library(sf)

facilities <- st_as_sf(data.frame(x = runif(20), y = runif(20)), coords = c("x", "y"))

# Select 5 facilities maximally dispersed
result <- p_dispersion(facilities, n_facilities = 5)

# Minimum distance between any two selected facilities
attr(result, "spopt")$min_distance
}

}
\references{
Kuby, M. J. (1987). Programming Models for Facility Dispersion: The
p-Dispersion and Maxisum Dispersion Problems. Geographical Analysis,
19(4), 315-329. \doi{10.1111/j.1538-4632.1987.tb00133.x}
}
