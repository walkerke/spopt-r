% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/region_ward.R
\name{ward_spatial}
\alias{ward_spatial}
\title{Ward Spatial Clustering}
\usage{
ward_spatial(
  data,
  attrs = NULL,
  n_regions,
  weights = "queen",
  bridge_islands = FALSE,
  scale = TRUE,
  verbose = FALSE
)
}
\arguments{
\item{data}{An sf object with polygon or point geometries.}

\item{attrs}{Character vector of column names to use for clustering
(e.g., \code{c("var1", "var2")}). If NULL, uses all numeric columns.}

\item{n_regions}{Integer. Number of regions (clusters) to create.}

\item{weights}{Spatial weights specification. Can be:
\itemize{
\item \code{"queen"} (default): Polygons sharing any boundary point are neighbors
\item \code{"rook"}: Polygons sharing an edge are neighbors
\item An \code{nb} object from spdep or created with \code{\link[=sp_weights]{sp_weights()}}
\item A list for other weight types: \code{list(type = "knn", k = 6)} for
k-nearest neighbors, or \code{list(type = "distance", d = 5000)} for
distance-based weights
}}

\item{bridge_islands}{Logical. If TRUE, automatically connect disconnected
components (e.g., islands) using nearest-neighbor edges. If FALSE (default),
the function will error when the spatial weights graph is disconnected.}

\item{scale}{Logical. If TRUE (default), standardize attributes before clustering.}

\item{verbose}{Logical. Print progress messages.}
}
\value{
An sf object with a \code{.region} column containing cluster assignments.
Metadata is stored in the "spopt" attribute.
}
\description{
Performs spatially-constrained hierarchical clustering using Ward's
minimum variance method. Only spatially contiguous areas can be merged,
ensuring all resulting regions are spatially connected.
}
\details{
This function implements spatially-constrained agglomerative hierarchical
clustering using Ward's minimum variance criterion. Unlike standard Ward
clustering, this version enforces spatial contiguity by only allowing
clusters that share a border to be merged.

The algorithm:
\enumerate{
\item Starts with each observation as its own cluster
\item At each step, finds the pair of \strong{adjacent} clusters with minimum
Ward distance (increase in total within-cluster variance)
\item Merges them into a single cluster
\item Repeats until the desired number of regions is reached
}

The result guarantees that all regions are spatially contiguous.
}
\examples{
\dontrun{
library(sf)
nc <- st_read(system.file("shape/nc.shp", package = "sf"))

# Cluster into 8 spatially-contiguous regions
result <- ward_spatial(nc, attrs = c("SID74", "SID79"), n_regions = 8)
plot(result[".region"])
}

}
